<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="/Mods/Upvoid/Web.Tools.Common/1.0.0/css/bootstrap.min.css">
    <title>Loading</title>
</head>
<body style="background: transparent;">
    <div class="panel panel-default" style="width: 75%; margin: 100px auto;">
        <div class="panel-body text-center">
            <h1>Generating World: <span id="generation-progress">0</span>%</h1>
            <h2 id="loading-notice">This may take several minutes, depending on your CPU speed.</h2>
            <a id="start-button" href="javascript: clickStart()" class="btn btn-block btn-lg btn-success hidden">Start</a>
        </div>
    </div>

    <script src="/Mods/Upvoid/Web.Tools.Common/1.0.0/js/jquery-2.0.3.min.js"></script>
    <script src="/Mods/Upvoid/Web.Tools.Common/1.0.0/js/bootstrap.min.js"></script>
    <script src="/Mods/Upvoid/Web.Tools.Plots/1.0.0/plots/plots.js"></script>
    <script>
        WebsocketHandler.register("/Mods/Upvoid/UpvoidMiner/0.0.1/GenerationProgress", function(data) {
            $('#generation-progress').html(Math.round(data*100.0));
            if(data >= 1.0)
            {
                $('#loading-notice').hide();
                $('#start-button').removeClass("hidden");
            }
        });

        function clickStart()
        {
            $.get("/Mods/Upvoid/UpvoidMiner/0.0.1/ActivatePlayer", "", function() {window.location.href = "IngameGui.html";});
        }

    </script>

</body>
</html>